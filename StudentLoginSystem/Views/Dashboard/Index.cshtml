@model UserModel

@{
    ViewData["Title"] = "Student Dashboard";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-5">
    <div class="card shadow-lg rounded-4">
        <div class="card-header bg-success text-white text-center fs-4 rounded-top-4">
            Welcome, @Model.StudentName
        </div>
        <div class="card-body p-4">
            <table class="table table-bordered table-striped">
                <tbody>
                    <tr>
                        <th scope="row">Roll Number</th>
                        <td>@Model.RollNumber</td>
                    </tr>
                    <tr>
                        <th scope="row">Student Name</th>
                        <td>@Model.StudentName</td>
                    </tr>
                    <tr>
                        <th scope="row">Father Name</th>
                        <td>@Model.FatherName</td>
                    </tr>
                    <tr>
                        <th scope="row">Program</th>
                        <td>@Model.Program</td>
                    </tr>
                    <tr>
                        <th scope="row">Group</th>
                        <td>@Model.Group</td>
                    </tr>
                    <tr>
                        <th scope="row">Standard Class</th>
                        <td>@Model.StandardClass</td>
                    </tr>
                    <tr>
                        <th scope="row">Voucher</th>
                        <td>
                            <a href="@Model.VoucherUrl" target="_blank" class="btn btn-outline-primary btn-sm">
                                Download Voucher
                            </a>
                        </td>
                        @* <button onclick="sendMessages()" class="btn btn-success mt-3">Send WhatsApp Messages</button> *@
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const mobileNumbers = [ // You should fill this from the server or dynamically
        '923342087639'
    ];

    const message = encodeURIComponent("Dear student, please check your account details and voucher.");

    function sendMessages() {
        mobileNumbers.forEach((number, index) => {
            setTimeout(() => {
                const url = `https://wa.me/${number}?text=${message}`;
                window.open(url, '_blank');
            }, index * 1500); // delay to avoid blocking
        });
    }
</script>